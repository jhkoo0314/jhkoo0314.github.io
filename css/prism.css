/* PrismJS 다크/라이트 모드 지원 테마 */

/* 기본 코드 블록 스타일링 */
code[class*="language-"],
pre[class*="language-"] {
  color: var(--text-primary);
  background: var(--code-bg);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9em;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;
  tab-size: 4;
  hyphens: none;
}

/* 라이트 모드용 Prism 테마 (One Light 기반) */
:root pre[class*="language-"],
:root :not(pre) > code[class*="language-"] {
  background: #fafbfc;
  color: #24292e;
}

/* 토큰 색상 - 라이트 모드 */
:root .token.comment,
:root .token.prolog,
:root .token.doctype,
:root .token.cdata {
  color: #6a737d;
}

:root .token.punctuation {
  color: #24292e;
}

:root .token.property,
:root .token.tag,
:root .token.constant,
:root .token.symbol,
:root .token.deleted {
  color: #005cc5;
}

:root .token.boolean,
:root .token.number {
  color: #005cc5;
}

:root .token.selector,
:root .token.attr-name,
:root .token.string,
:root .token.char,
:root .token.builtin,
:root .token.inserted {
  color: #032f62;
}

:root .token.operator,
:root .token.entity,
:root .token.url,
:root .token.variable {
  color: #d73a49;
}

:root .token.atrule,
:root .token.attr-value,
:root .token.function,
:root .token.class-name {
  color: #6f42c1;
}

:root .token.keyword {
  color: #d73a49;
}

:root .token.regex,
:root .token.important {
  color: #e36209;
}

/* 다크 모드용 Prism 테마 (One Dark 기반) */
[data-theme="dark"] pre[class*="language-"],
[data-theme="dark"] :not(pre) > code[class*="language-"] {
  background: #2d3748;
  color: #e2e8f0;
}

/* 토큰 색상 - 다크 모드 */
[data-theme="dark"] .token.comment,
[data-theme="dark"] .token.prolog,
[data-theme="dark"] .token.doctype,
[data-theme="dark"] .token.cdata {
  color: #718096;
}

[data-theme="dark"] .token.punctuation {
  color: #e2e8f0;
}

[data-theme="dark"] .token.property,
[data-theme="dark"] .token.tag,
[data-theme="dark"] .token.constant,
[data-theme="dark"] .token.symbol,
[data-theme="dark"] .token.deleted {
  color: #63b3ed;
}

[data-theme="dark"] .token.boolean,
[data-theme="dark"] .token.number {
  color: #63b3ed;
}

[data-theme="dark"] .token.selector,
[data-theme="dark"] .token.attr-name,
[data-theme="dark"] .token.string,
[data-theme="dark"] .token.char,
[data-theme="dark"] .token.builtin,
[data-theme="dark"] .token.inserted {
  color: #68d391;
}

[data-theme="dark"] .token.operator,
[data-theme="dark"] .token.entity,
[data-theme="dark"] .token.url,
[data-theme="dark"] .token.variable {
  color: #fc8181;
}

[data-theme="dark"] .token.atrule,
[data-theme="dark"] .token.attr-value,
[data-theme="dark"] .token.function,
[data-theme="dark"] .token.class-name {
  color: #b794f6;
}

[data-theme="dark"] .token.keyword {
  color: #fc8181;
}

[data-theme="dark"] .token.regex,
[data-theme="dark"] .token.important {
  color: #f6ad55;
}

/* 코드 블록 내 선택 영역 */
pre[class*="language-"]::-moz-selection,
pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection,
code[class*="language-"] ::-moz-selection {
  background: rgba(33, 150, 243, 0.2);
}

pre[class*="language-"]::selection,
pre[class*="language-"] ::selection,
code[class*="language-"]::selection,
code[class*="language-"] ::selection {
  background: rgba(33, 150, 243, 0.2);
}

/* 코드 블록 스타일링 */
pre[class*="language-"] {
  padding: 1em;
  margin: 0.5em 0;
  overflow: auto;
  border-radius: 0.3em;
  border: 1px solid var(--border-color);
}

:not(pre) > code[class*="language-"] {
  padding: 0.1em 0.3em;
  border-radius: 0.3em;
  white-space: normal;
}

/* 라인 하이라이트 */
.line-highlight {
  background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .line-highlight {
  background: rgba(0, 0, 0, 0.2);
}

/* 언어 라벨 */
pre[class*="language-"]::before {
  content: attr(data-language);
  position: absolute;
  top: 0.5em;
  right: 0.5em;
  font-size: 0.8em;
  color: var(--text-muted);
  background: var(--bg-secondary);
  padding: 0.2em 0.5em;
  border-radius: 0.3em;
  text-transform: uppercase;
  font-weight: 600;
}

pre[class*="language-"] {
  position: relative;
}

/* 커맨드 라인 프롬프트 */
.command-line-prompt {
  border-right: 1px solid #999;
  display: block;
  float: left;
  font-size: 100%;
  letter-spacing: -1px;
  margin-right: 1em;
  pointer-events: none;
  text-align: right;
  user-select: none;
  vertical-align: middle;
  width: 1em;
}

.command-line-prompt > span:before {
  color: #999;
  content: ' ';
  display: block;
  padding-right: 0.8em;
}

.command-line-prompt > span[data-user]:before {
  content: "[" attr(data-user) "@" attr(data-host) "] $";
}

.command-line-prompt > span[data-user][data-host]:before {
  content: "[" attr(data-user) "@" attr(data-host) "] $";
}

.command-line-prompt > span[data-prompt]:before {
  content: attr(data-prompt);
}

/* Diff 하이라이트 */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}

.line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: rgba(255, 255, 255, 0.2);
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

[data-theme="dark"] .line-highlight {
  background: rgba(0, 0, 0, 0.2);
}

pre[data-line] .line-highlight:before,
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: 0;
  left: 0.5em;
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
  font: bold 65%/1.5 sans-serif;
  height: 1.5em;
  line-height: 1.5;
  padding: 0 0.5em;
  text-align: center;
  vertical-align: middle;
  border-radius: 0.3em;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: 0;
}

/* 추가 언어 지원을 위한 스타일 */
.language-css .token.string,
.language-scss .token.string,
.language-less .token.string {
  color: #032f62;
}

.language-css .token.property,
.language-scss .token.property,
.language-less .token.property {
  color: #005cc5;
}

.language-javascript .token.console,
.language-javascript .token.function {
  color: #6f42c1;
}

/* 인라인 코드 */
:not(pre) > code[class*="language-"] {
  background: var(--code-bg);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

/* 파일명 표시 */
pre[class*="language-"] + .filename {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-top: none;
  border-radius: 0 0 0.3em 0.3em;
  color: var(--text-secondary);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.8em;
  margin: -1px 0 1em;
  padding: 0.5em 1em;
  position: relative;
  text-align: center;
}
